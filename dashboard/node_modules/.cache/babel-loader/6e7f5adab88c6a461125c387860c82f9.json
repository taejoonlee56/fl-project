{"ast":null,"code":"import { object } from \"./feature.js\";\nimport stitch from \"./stitch.js\";\nexport default function (topology) {\n  return object(topology, meshArcs.apply(this, arguments));\n}\nexport function meshArcs(topology, object, filter) {\n  var arcs, i, n;\n  if (arguments.length > 1) arcs = extractArcs(topology, object, filter);else for (i = 0, arcs = new Array(n = topology.arcs.length); i < n; ++i) {\n    arcs[i] = i;\n  }\n  return {\n    type: \"MultiLineString\",\n    arcs: stitch(topology, arcs)\n  };\n}\n\nfunction extractArcs(topology, object, filter) {\n  var arcs = [],\n      geomsByArc = [],\n      geom;\n\n  function extract0(i) {\n    var j = i < 0 ? ~i : i;\n    (geomsByArc[j] || (geomsByArc[j] = [])).push({\n      i: i,\n      g: geom\n    });\n  }\n\n  function extract1(arcs) {\n    arcs.forEach(extract0);\n  }\n\n  function extract2(arcs) {\n    arcs.forEach(extract1);\n  }\n\n  function extract3(arcs) {\n    arcs.forEach(extract2);\n  }\n\n  function geometry(o) {\n    switch (geom = o, o.type) {\n      case \"GeometryCollection\":\n        o.geometries.forEach(geometry);\n        break;\n\n      case \"LineString\":\n        extract1(o.arcs);\n        break;\n\n      case \"MultiLineString\":\n      case \"Polygon\":\n        extract2(o.arcs);\n        break;\n\n      case \"MultiPolygon\":\n        extract3(o.arcs);\n        break;\n    }\n  }\n\n  geometry(object);\n  geomsByArc.forEach(filter == null ? function (geoms) {\n    arcs.push(geoms[0].i);\n  } : function (geoms) {\n    if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i);\n  });\n  return arcs;\n}","map":{"version":3,"sources":["D:/fl-carla/node_modules/topojson-client/src/mesh.js"],"names":["object","stitch","topology","meshArcs","apply","arguments","filter","arcs","i","n","length","extractArcs","Array","type","geomsByArc","geom","extract0","j","push","g","extract1","forEach","extract2","extract3","geometry","o","geometries","geoms"],"mappings":"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","sourcesContent":["import {object} from \"./feature.js\";\r\nimport stitch from \"./stitch.js\";\r\n\r\nexport default function(topology) {\r\n  return object(topology, meshArcs.apply(this, arguments));\r\n}\r\n\r\nexport function meshArcs(topology, object, filter) {\r\n  var arcs, i, n;\r\n  if (arguments.length > 1) arcs = extractArcs(topology, object, filter);\r\n  else for (i = 0, arcs = new Array(n = topology.arcs.length); i < n; ++i) arcs[i] = i;\r\n  return {type: \"MultiLineString\", arcs: stitch(topology, arcs)};\r\n}\r\n\r\nfunction extractArcs(topology, object, filter) {\r\n  var arcs = [],\r\n      geomsByArc = [],\r\n      geom;\r\n\r\n  function extract0(i) {\r\n    var j = i < 0 ? ~i : i;\r\n    (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\r\n  }\r\n\r\n  function extract1(arcs) {\r\n    arcs.forEach(extract0);\r\n  }\r\n\r\n  function extract2(arcs) {\r\n    arcs.forEach(extract1);\r\n  }\r\n\r\n  function extract3(arcs) {\r\n    arcs.forEach(extract2);\r\n  }\r\n\r\n  function geometry(o) {\r\n    switch (geom = o, o.type) {\r\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\r\n      case \"LineString\": extract1(o.arcs); break;\r\n      case \"MultiLineString\": case \"Polygon\": extract2(o.arcs); break;\r\n      case \"MultiPolygon\": extract3(o.arcs); break;\r\n    }\r\n  }\r\n\r\n  geometry(object);\r\n\r\n  geomsByArc.forEach(filter == null\r\n      ? function(geoms) { arcs.push(geoms[0].i); }\r\n      : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\r\n\r\n  return arcs;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}