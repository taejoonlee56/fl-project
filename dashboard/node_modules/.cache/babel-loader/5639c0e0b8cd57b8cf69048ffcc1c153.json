{"ast":null,"code":"(function (global, factory) {\n  if (typeof module === \"object\" && typeof module.exports === \"object\") factory(exports, require(\"react\"), require(\"prop-types\"), require(\"katex\"));else if (typeof define === \"function\" && define.amd) define([\"exports\", \"react\", \"prop-types\", \"katex\"], factory);else if (global = typeof globalThis !== \"undefined\" ? globalThis : global || self) factory(global.index = {}, global.react, global.propTypes, global.katex);\n})(this, function (exports, _react, _propTypes, _katex) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  function _export(target, all) {\n    for (var name in all) {\n      Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n      });\n    }\n  }\n\n  _export(exports, {\n    BlockMath: function BlockMath() {\n      return _BlockMath;\n    },\n    InlineMath: function InlineMath() {\n      return _InlineMath;\n    }\n  });\n\n  _react = /*#__PURE__*/_interopRequireWildcard(_react);\n  _propTypes = /*#__PURE__*/_interopRequireDefault(_propTypes);\n  _katex = /*#__PURE__*/_interopRequireDefault(_katex);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n    return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n      return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n  }\n\n  function _interopRequireWildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) {\n      return obj;\n    }\n\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n      return {\n        default: obj\n      };\n    }\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) {\n      return cache.get(obj);\n    }\n\n    var newObj = {};\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n      if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n        if (desc && (desc.get || desc.set)) {\n          Object.defineProperty(newObj, key, desc);\n        } else {\n          newObj[key] = obj[key];\n        }\n      }\n    }\n\n    newObj.default = obj;\n\n    if (cache) {\n      cache.set(obj, newObj);\n    }\n\n    return newObj;\n  }\n  /**\n  * @typedef {import(\"react\").ReactNode} ReactNode\n  *\n  *\n  * @callback ErrorRenderer\n  * @param {Error} error\n  * @returns {ReactNode}\n  *\n  *\n  * @typedef {object} MathComponentPropsWithMath\n  * @property {string} math\n  * @property {ReactNode=} children\n  * @property {string=} errorColor\n  * @property {ErrorRenderer=} renderError\n  *\n  *\n  * @typedef {object} MathComponentPropsWithChildren\n  * @property {string=} math\n  * @property {ReactNode} children\n  * @property {string=} errorColor\n  * @property {ErrorRenderer=} renderError\n  *\n  * @typedef {MathComponentPropsWithMath | MathComponentPropsWithChildren} MathComponentProps\n  */\n\n\n  var createMathComponent = function createMathComponent(Component, _ref) {\n    var displayMode = _ref.displayMode;\n\n    /**\n    *\n    * @param {MathComponentProps} props\n    * @returns {ReactNode}\n    */\n    var MathComponent = function MathComponent(_ref2) {\n      var children = _ref2.children,\n          errorColor = _ref2.errorColor,\n          math = _ref2.math,\n          renderError = _ref2.renderError;\n      var formula = math !== null && math !== void 0 ? math : children;\n\n      var _ref3 = (0, _react.useMemo)(function () {\n        try {\n          var _html = _katex.default.renderToString(formula, {\n            displayMode: displayMode,\n            errorColor: errorColor,\n            throwOnError: !!renderError\n          });\n\n          return {\n            html: _html,\n            error: undefined\n          };\n        } catch (error) {\n          if (error instanceof _katex.default.ParseError || error instanceof TypeError) {\n            return {\n              error: error\n            };\n          }\n\n          throw error;\n        }\n      }, [formula, errorColor, renderError]),\n          html = _ref3.html,\n          error = _ref3.error;\n\n      if (error) {\n        return renderError ? renderError(error) : /*#__PURE__*/_react.default.createElement(Component, {\n          html: \"\".concat(error.message)\n        });\n      }\n\n      return /*#__PURE__*/_react.default.createElement(Component, {\n        html: html\n      });\n    };\n\n    MathComponent.propTypes = {\n      children: _propTypes.default.string,\n      errorColor: _propTypes.default.string,\n      math: _propTypes.default.string,\n      renderError: _propTypes.default.func\n    };\n    return MathComponent;\n  };\n\n  var InternalPathComponentPropTypes = {\n    html: _propTypes.default.string.isRequired\n  };\n\n  var InternalBlockMath = function InternalBlockMath(_ref4) {\n    var html = _ref4.html;\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      \"data-testid\": \"react-katex\",\n      dangerouslySetInnerHTML: {\n        __html: html\n      }\n    });\n  };\n\n  InternalBlockMath.propTypes = InternalPathComponentPropTypes;\n\n  var InternalInlineMath = function InternalInlineMath(_ref5) {\n    var html = _ref5.html;\n    return /*#__PURE__*/_react.default.createElement(\"span\", {\n      \"data-testid\": \"react-katex\",\n      dangerouslySetInnerHTML: {\n        __html: html\n      }\n    });\n  };\n\n  InternalInlineMath.propTypes = InternalPathComponentPropTypes;\n\n  var _BlockMath = createMathComponent(InternalBlockMath, {\n    displayMode: true\n  });\n\n  var _InlineMath = createMathComponent(InternalInlineMath, {\n    displayMode: false\n  });\n}); //# sourceMappingURL=react-katex.js.map","map":{"version":3,"sources":["../src/index.jsx"],"names":["createMathComponent","Component","displayMode","MathComponent","children","errorColor","math","renderError","formula","html","error","useMemo","KaTeX","renderToString","throwOnError","undefined","ParseError","TypeError","message","propTypes","PropTypes","string","func","InternalPathComponentPropTypes","isRequired","InternalBlockMath","div","data-testid","dangerouslySetInnerHTML","__html","InternalInlineMath","span","BlockMath","InlineMath"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport KaTeX from 'katex';\n\n/**\n * @typedef {import(\"react\").ReactNode} ReactNode\n *\n *\n * @callback ErrorRenderer\n * @param {Error} error\n * @returns {ReactNode}\n *\n *\n * @typedef {object} MathComponentPropsWithMath\n * @property {string} math\n * @property {ReactNode=} children\n * @property {string=} errorColor\n * @property {ErrorRenderer=} renderError\n *\n *\n * @typedef {object} MathComponentPropsWithChildren\n * @property {string=} math\n * @property {ReactNode} children\n * @property {string=} errorColor\n * @property {ErrorRenderer=} renderError\n *\n * @typedef {MathComponentPropsWithMath | MathComponentPropsWithChildren} MathComponentProps\n */\n\nconst createMathComponent = (Component, { displayMode }) => {\n  /**\n   *\n   * @param {MathComponentProps} props\n   * @returns {ReactNode}\n   */\n  const MathComponent = ({ children, errorColor, math, renderError }) => {\n    const formula = math ?? children;\n\n    const { html, error } = useMemo(() => {\n      try {\n        const html = KaTeX.renderToString(formula, {\n          displayMode,\n          errorColor,\n          throwOnError: !!renderError,\n        });\n\n        return { html, error: undefined };\n      } catch (error) {\n        if (error instanceof KaTeX.ParseError || error instanceof TypeError) {\n          return { error };\n        }\n\n        throw error;\n      }\n    }, [formula, errorColor, renderError]);\n\n    if (error) {\n      return renderError ? renderError(error) : <Component html={`${error.message}`} />;\n    }\n\n    return <Component html={html} />;\n  };\n\n  MathComponent.propTypes = {\n    children: PropTypes.string,\n    errorColor: PropTypes.string,\n    math: PropTypes.string,\n    renderError: PropTypes.func,\n  };\n\n  return MathComponent;\n};\n\nconst InternalPathComponentPropTypes = {\n  html: PropTypes.string.isRequired,\n};\n\nconst InternalBlockMath = ({ html }) => {\n  return <div data-testid=\"react-katex\" dangerouslySetInnerHTML={{ __html: html }} />;\n};\n\nInternalBlockMath.propTypes = InternalPathComponentPropTypes;\n\nconst InternalInlineMath = ({ html }) => {\n  return <span data-testid=\"react-katex\" dangerouslySetInnerHTML={{ __html: html }} />;\n};\n\nInternalInlineMath.propTypes = InternalPathComponentPropTypes;\n\nexport const BlockMath = createMathComponent(InternalBlockMath, { displayMode: true });\nexport const InlineMath = createMathComponent(InternalInlineMath, { displayMode: false });\n"]},"metadata":{},"sourceType":"script"}