{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/home/tj/fl-carla/dashboard/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/home/tj/fl-carla/dashboard/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _assertThisInitialized = require(\"/home/tj/fl-carla/dashboard/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\n\nvar _inherits = require(\"/home/tj/fl-carla/dashboard/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"/home/tj/fl-carla/dashboard/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _redux = require(\"redux\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Container = _interopRequireDefault(require(\"../dnd/Container\"));\n\nvar _Draggable = _interopRequireDefault(require(\"../dnd/Draggable\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _pick = _interopRequireDefault(require(\"lodash/pick\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _Lane = _interopRequireDefault(require(\"./Lane\"));\n\nvar _reactPopopo = require(\"react-popopo\");\n\nvar boardActions = _interopRequireWildcard(require(\"../actions/BoardActions\"));\n\nvar laneActions = _interopRequireWildcard(require(\"../actions/LaneActions\"));\n\nvar BoardContainer = /*#__PURE__*/function (_react$Component) {\n  _inherits(BoardContainer, _react$Component);\n\n  var _super = _createSuper(BoardContainer);\n\n  function BoardContainer() {\n    var _this;\n\n    _classCallCheck(this, BoardContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"state\", {\n      addLaneMode: false\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"onDragStart\", function (_ref) {\n      var payload = _ref.payload;\n      var handleLaneDragStart = _this.props.handleLaneDragStart;\n      handleLaneDragStart(payload.id);\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"onLaneDrop\", function (_ref2) {\n      var removedIndex = _ref2.removedIndex,\n          addedIndex = _ref2.addedIndex,\n          payload = _ref2.payload;\n      var _this$props = _this.props,\n          actions = _this$props.actions,\n          handleLaneDragEnd = _this$props.handleLaneDragEnd;\n\n      if (removedIndex !== addedIndex) {\n        actions.moveLane({\n          oldIndex: removedIndex,\n          newIndex: addedIndex\n        });\n        handleLaneDragEnd(removedIndex, addedIndex, payload);\n      }\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"getCardDetails\", function (laneId, cardIndex) {\n      return _this.props.reducerData.lanes.find(function (lane) {\n        return lane.id === laneId;\n      }).cards[cardIndex];\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"getLaneDetails\", function (index) {\n      return _this.props.reducerData.lanes[index];\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"wireEventBus\", function () {\n      var _this$props2 = _this.props,\n          actions = _this$props2.actions,\n          eventBusHandle = _this$props2.eventBusHandle;\n      var eventBus = {\n        publish: function publish(event) {\n          switch (event.type) {\n            case 'ADD_CARD':\n              return actions.addCard({\n                laneId: event.laneId,\n                card: event.card\n              });\n\n            case 'UPDATE_CARD':\n              return actions.updateCard({\n                laneId: event.laneId,\n                card: event.card\n              });\n\n            case 'REMOVE_CARD':\n              return actions.removeCard({\n                laneId: event.laneId,\n                cardId: event.cardId\n              });\n\n            case 'REFRESH_BOARD':\n              return actions.loadBoard(event.data);\n\n            case 'MOVE_CARD':\n              return actions.moveCardAcrossLanes({\n                fromLaneId: event.fromLaneId,\n                toLaneId: event.toLaneId,\n                cardId: event.cardId,\n                index: event.index\n              });\n\n            case 'UPDATE_CARDS':\n              return actions.updateCards({\n                laneId: event.laneId,\n                cards: event.cards\n              });\n\n            case 'UPDATE_CARD':\n              return actions.updateCard({\n                laneId: event.laneId,\n                updatedCard: event.card\n              });\n\n            case 'UPDATE_LANES':\n              return actions.updateLanes(event.lanes);\n\n            case 'UPDATE_LANE':\n              return actions.updateLane(event.lane);\n          }\n        }\n      };\n      eventBusHandle(eventBus);\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"hideEditableLane\", function () {\n      _this.setState({\n        addLaneMode: false\n      });\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"showEditableLane\", function () {\n      _this.setState({\n        addLaneMode: true\n      });\n    });\n    (0, _defineProperty2.default)(_assertThisInitialized(_this), \"addNewLane\", function (params) {\n      _this.hideEditableLane();\n\n      _this.props.actions.addLane(params);\n\n      _this.props.onLaneAdd(params);\n    });\n    return _this;\n  }\n\n  _createClass(BoardContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props3 = this.props,\n          actions = _this$props3.actions,\n          eventBusHandle = _this$props3.eventBusHandle;\n      actions.loadBoard(this.props.data);\n\n      if (eventBusHandle) {\n        this.wireEventBus();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // this.props.data changes when external Board input props change and this.props.reducerData changes due to event bus or UI changes\n      var _this$props4 = prevProps,\n          data = _this$props4.data,\n          reducerData = _this$props4.reducerData,\n          onDataChange = _this$props4.onDataChange;\n\n      if (this.props.reducerData && !(0, _isEqual.default)(reducerData, this.props.reducerData)) {\n        onDataChange(this.props.reducerData);\n      }\n\n      if (this.props.data && !(0, _isEqual.default)(this.props.data, data)) {\n        this.props.actions.loadBoard(this.props.data);\n        onDataChange(this.props.data);\n      }\n    }\n  }, {\n    key: \"groupName\",\n    get: function get() {\n      var id = this.props.id;\n      return \"TrelloBoard\".concat(id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props5 = this.props,\n          id = _this$props5.id,\n          components = _this$props5.components,\n          reducerData = _this$props5.reducerData,\n          draggable = _this$props5.draggable,\n          laneDraggable = _this$props5.laneDraggable,\n          laneDragClass = _this$props5.laneDragClass,\n          laneDropClass = _this$props5.laneDropClass,\n          style = _this$props5.style,\n          onDataChange = _this$props5.onDataChange,\n          onCardAdd = _this$props5.onCardAdd,\n          onCardUpdate = _this$props5.onCardUpdate,\n          onCardClick = _this$props5.onCardClick,\n          onBeforeCardDelete = _this$props5.onBeforeCardDelete,\n          onCardDelete = _this$props5.onCardDelete,\n          onLaneScroll = _this$props5.onLaneScroll,\n          onLaneClick = _this$props5.onLaneClick,\n          onLaneAdd = _this$props5.onLaneAdd,\n          onLaneDelete = _this$props5.onLaneDelete,\n          onLaneUpdate = _this$props5.onLaneUpdate,\n          editable = _this$props5.editable,\n          canAddLanes = _this$props5.canAddLanes,\n          laneStyle = _this$props5.laneStyle,\n          onCardMoveAcrossLanes = _this$props5.onCardMoveAcrossLanes,\n          t = _this$props5.t,\n          otherProps = (0, _objectWithoutProperties2.default)(_this$props5, [\"id\", \"components\", \"reducerData\", \"draggable\", \"laneDraggable\", \"laneDragClass\", \"laneDropClass\", \"style\", \"onDataChange\", \"onCardAdd\", \"onCardUpdate\", \"onCardClick\", \"onBeforeCardDelete\", \"onCardDelete\", \"onLaneScroll\", \"onLaneClick\", \"onLaneAdd\", \"onLaneDelete\", \"onLaneUpdate\", \"editable\", \"canAddLanes\", \"laneStyle\", \"onCardMoveAcrossLanes\", \"t\"]);\n      var addLaneMode = this.state.addLaneMode; // Stick to whitelisting attributes to segregate board and lane props\n\n      var passthroughProps = (0, _pick.default)(this.props, ['onCardMoveAcrossLanes', 'onLaneScroll', 'onLaneDelete', 'onLaneUpdate', 'onCardClick', 'onBeforeCardDelete', 'onCardDelete', 'onCardAdd', 'onCardUpdate', 'onLaneClick', 'laneSortFunction', 'draggable', 'laneDraggable', 'cardDraggable', 'collapsibleLanes', 'canAddLanes', 'hideCardDeleteIcon', 'tagStyle', 'handleDragStart', 'handleDragEnd', 'cardDragClass', 'editLaneTitle', 't']);\n      return _react.default.createElement(components.BoardWrapper, (0, _extends2.default)({\n        style: style\n      }, otherProps, {\n        draggable: false\n      }), _react.default.createElement(_reactPopopo.PopoverWrapper, null, _react.default.createElement(_Container.default, {\n        orientation: \"horizontal\",\n        onDragStart: this.onDragStart,\n        dragClass: laneDragClass,\n        dropClass: laneDropClass,\n        onDrop: this.onLaneDrop,\n        lockAxis: \"x\",\n        getChildPayload: function getChildPayload(index) {\n          return _this2.getLaneDetails(index);\n        },\n        groupName: this.groupName\n      }, reducerData.lanes.map(function (lane, index) {\n        var id = lane.id,\n            droppable = lane.droppable,\n            otherProps = (0, _objectWithoutProperties2.default)(lane, [\"id\", \"droppable\"]);\n\n        var laneToRender = _react.default.createElement(_Lane.default, (0, _extends2.default)({\n          key: id,\n          boardId: _this2.groupName,\n          components: components,\n          id: id,\n          getCardDetails: _this2.getCardDetails,\n          index: index,\n          droppable: droppable === undefined ? true : droppable,\n          style: laneStyle || lane.style || {},\n          labelStyle: lane.labelStyle || {},\n          cardStyle: _this2.props.cardStyle || lane.cardStyle,\n          editable: editable && !lane.disallowAddingCard\n        }, otherProps, passthroughProps));\n\n        return draggable && laneDraggable ? _react.default.createElement(_Draggable.default, {\n          key: lane.id\n        }, laneToRender) : laneToRender;\n      }))), canAddLanes && _react.default.createElement(_Container.default, {\n        orientation: \"horizontal\"\n      }, editable && !addLaneMode ? _react.default.createElement(components.NewLaneSection, {\n        t: t,\n        onClick: this.showEditableLane\n      }) : addLaneMode && _react.default.createElement(components.NewLaneForm, {\n        onCancel: this.hideEditableLane,\n        onAdd: this.addNewLane,\n        t: t\n      })));\n    }\n  }]);\n\n  return BoardContainer;\n}(_react.Component);\n\nBoardContainer.propTypes = {\n  id: _propTypes.default.string,\n  components: _propTypes.default.object,\n  actions: _propTypes.default.object,\n  data: _propTypes.default.object.isRequired,\n  reducerData: _propTypes.default.object,\n  onDataChange: _propTypes.default.func,\n  eventBusHandle: _propTypes.default.func,\n  onLaneScroll: _propTypes.default.func,\n  onCardClick: _propTypes.default.func,\n  onBeforeCardDelete: _propTypes.default.func,\n  onCardDelete: _propTypes.default.func,\n  onCardAdd: _propTypes.default.func,\n  onCardUpdate: _propTypes.default.func,\n  onLaneAdd: _propTypes.default.func,\n  onLaneDelete: _propTypes.default.func,\n  onLaneClick: _propTypes.default.func,\n  onLaneUpdate: _propTypes.default.func,\n  laneSortFunction: _propTypes.default.func,\n  draggable: _propTypes.default.bool,\n  collapsibleLanes: _propTypes.default.bool,\n  editable: _propTypes.default.bool,\n  canAddLanes: _propTypes.default.bool,\n  hideCardDeleteIcon: _propTypes.default.bool,\n  handleDragStart: _propTypes.default.func,\n  handleDragEnd: _propTypes.default.func,\n  handleLaneDragStart: _propTypes.default.func,\n  handleLaneDragEnd: _propTypes.default.func,\n  style: _propTypes.default.object,\n  tagStyle: _propTypes.default.object,\n  laneDraggable: _propTypes.default.bool,\n  cardDraggable: _propTypes.default.bool,\n  cardDragClass: _propTypes.default.string,\n  laneDragClass: _propTypes.default.string,\n  laneDropClass: _propTypes.default.string,\n  onCardMoveAcrossLanes: _propTypes.default.func.isRequired,\n  t: _propTypes.default.func.isRequired\n};\nBoardContainer.defaultProps = {\n  t: function t(v) {\n    return v;\n  },\n  onDataChange: function onDataChange() {},\n  handleDragStart: function handleDragStart() {},\n  handleDragEnd: function handleDragEnd() {},\n  handleLaneDragStart: function handleLaneDragStart() {},\n  handleLaneDragEnd: function handleLaneDragEnd() {},\n  onCardUpdate: function onCardUpdate() {},\n  onLaneAdd: function onLaneAdd() {},\n  onLaneDelete: function onLaneDelete() {},\n  onCardMoveAcrossLanes: function onCardMoveAcrossLanes() {},\n  onLaneUpdate: function onLaneUpdate() {},\n  editable: false,\n  canAddLanes: false,\n  hideCardDeleteIcon: false,\n  draggable: false,\n  collapsibleLanes: false,\n  laneDraggable: true,\n  cardDraggable: true,\n  cardDragClass: 'react_trello_dragClass',\n  laneDragClass: 'react_trello_dragLaneClass',\n  laneDropClass: ''\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return state.lanes ? {\n    reducerData: state\n  } : {};\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    actions: (0, _redux.bindActionCreators)((0, _objectSpread2.default)({}, boardActions, laneActions), dispatch)\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(BoardContainer);\n\nexports.default = _default;","map":{"version":3,"sources":["/home/tj/fl-carla/dashboard/node_modules/react-trello/dist/controllers/BoardContainer.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","_objectSpread2","_extends2","_objectWithoutProperties2","_defineProperty2","_react","_redux","_reactRedux","_Container","_Draggable","_propTypes","_pick","_isEqual","_Lane","_reactPopopo","boardActions","laneActions","BoardContainer","args","addLaneMode","payload","handleLaneDragStart","props","id","removedIndex","addedIndex","_this$props","actions","handleLaneDragEnd","moveLane","oldIndex","newIndex","laneId","cardIndex","reducerData","lanes","find","lane","cards","index","_this$props2","eventBusHandle","eventBus","publish","event","type","addCard","card","updateCard","removeCard","cardId","loadBoard","data","moveCardAcrossLanes","fromLaneId","toLaneId","updateCards","updatedCard","updateLanes","updateLane","setState","params","hideEditableLane","addLane","onLaneAdd","_this$props3","wireEventBus","prevProps","_this$props4","onDataChange","concat","_this$props5","components","draggable","laneDraggable","laneDragClass","laneDropClass","style","onCardAdd","onCardUpdate","onCardClick","onBeforeCardDelete","onCardDelete","onLaneScroll","onLaneClick","onLaneDelete","onLaneUpdate","editable","canAddLanes","laneStyle","onCardMoveAcrossLanes","t","otherProps","state","passthroughProps","createElement","BoardWrapper","PopoverWrapper","orientation","onDragStart","dragClass","dropClass","onDrop","onLaneDrop","lockAxis","getChildPayload","getLaneDetails","groupName","map","droppable","laneToRender","key","boardId","getCardDetails","undefined","labelStyle","cardStyle","disallowAddingCard","NewLaneSection","onClick","showEditableLane","NewLaneForm","onCancel","onAdd","addNewLane","Component","propTypes","string","object","isRequired","func","laneSortFunction","bool","collapsibleLanes","hideCardDeleteIcon","handleDragStart","handleDragEnd","tagStyle","cardDraggable","cardDragClass","defaultProps","v","mapStateToProps","mapDispatchToProps","dispatch","bindActionCreators","_default","connect"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _redux = require(\"redux\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _Container = _interopRequireDefault(require(\"../dnd/Container\"));\n\nvar _Draggable = _interopRequireDefault(require(\"../dnd/Draggable\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _pick = _interopRequireDefault(require(\"lodash/pick\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _Lane = _interopRequireDefault(require(\"./Lane\"));\n\nvar _reactPopopo = require(\"react-popopo\");\n\nvar boardActions = _interopRequireWildcard(require(\"../actions/BoardActions\"));\n\nvar laneActions = _interopRequireWildcard(require(\"../actions/LaneActions\"));\n\nclass BoardContainer extends _react.Component {\n  constructor(...args) {\n    super(...args);\n    (0, _defineProperty2.default)(this, \"state\", {\n      addLaneMode: false\n    });\n    (0, _defineProperty2.default)(this, \"onDragStart\", ({\n      payload\n    }) => {\n      const handleLaneDragStart = this.props.handleLaneDragStart;\n      handleLaneDragStart(payload.id);\n    });\n    (0, _defineProperty2.default)(this, \"onLaneDrop\", ({\n      removedIndex,\n      addedIndex,\n      payload\n    }) => {\n      const _this$props = this.props,\n            actions = _this$props.actions,\n            handleLaneDragEnd = _this$props.handleLaneDragEnd;\n\n      if (removedIndex !== addedIndex) {\n        actions.moveLane({\n          oldIndex: removedIndex,\n          newIndex: addedIndex\n        });\n        handleLaneDragEnd(removedIndex, addedIndex, payload);\n      }\n    });\n    (0, _defineProperty2.default)(this, \"getCardDetails\", (laneId, cardIndex) => {\n      return this.props.reducerData.lanes.find(lane => lane.id === laneId).cards[cardIndex];\n    });\n    (0, _defineProperty2.default)(this, \"getLaneDetails\", index => {\n      return this.props.reducerData.lanes[index];\n    });\n    (0, _defineProperty2.default)(this, \"wireEventBus\", () => {\n      const _this$props2 = this.props,\n            actions = _this$props2.actions,\n            eventBusHandle = _this$props2.eventBusHandle;\n      let eventBus = {\n        publish: event => {\n          switch (event.type) {\n            case 'ADD_CARD':\n              return actions.addCard({\n                laneId: event.laneId,\n                card: event.card\n              });\n\n            case 'UPDATE_CARD':\n              return actions.updateCard({\n                laneId: event.laneId,\n                card: event.card\n              });\n\n            case 'REMOVE_CARD':\n              return actions.removeCard({\n                laneId: event.laneId,\n                cardId: event.cardId\n              });\n\n            case 'REFRESH_BOARD':\n              return actions.loadBoard(event.data);\n\n            case 'MOVE_CARD':\n              return actions.moveCardAcrossLanes({\n                fromLaneId: event.fromLaneId,\n                toLaneId: event.toLaneId,\n                cardId: event.cardId,\n                index: event.index\n              });\n\n            case 'UPDATE_CARDS':\n              return actions.updateCards({\n                laneId: event.laneId,\n                cards: event.cards\n              });\n\n            case 'UPDATE_CARD':\n              return actions.updateCard({\n                laneId: event.laneId,\n                updatedCard: event.card\n              });\n\n            case 'UPDATE_LANES':\n              return actions.updateLanes(event.lanes);\n\n            case 'UPDATE_LANE':\n              return actions.updateLane(event.lane);\n          }\n        }\n      };\n      eventBusHandle(eventBus);\n    });\n    (0, _defineProperty2.default)(this, \"hideEditableLane\", () => {\n      this.setState({\n        addLaneMode: false\n      });\n    });\n    (0, _defineProperty2.default)(this, \"showEditableLane\", () => {\n      this.setState({\n        addLaneMode: true\n      });\n    });\n    (0, _defineProperty2.default)(this, \"addNewLane\", params => {\n      this.hideEditableLane();\n      this.props.actions.addLane(params);\n      this.props.onLaneAdd(params);\n    });\n  }\n\n  componentDidMount() {\n    const _this$props3 = this.props,\n          actions = _this$props3.actions,\n          eventBusHandle = _this$props3.eventBusHandle;\n    actions.loadBoard(this.props.data);\n\n    if (eventBusHandle) {\n      this.wireEventBus();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    // this.props.data changes when external Board input props change and this.props.reducerData changes due to event bus or UI changes\n    const _this$props4 = prevProps,\n          data = _this$props4.data,\n          reducerData = _this$props4.reducerData,\n          onDataChange = _this$props4.onDataChange;\n\n    if (this.props.reducerData && !(0, _isEqual.default)(reducerData, this.props.reducerData)) {\n      onDataChange(this.props.reducerData);\n    }\n\n    if (this.props.data && !(0, _isEqual.default)(this.props.data, data)) {\n      this.props.actions.loadBoard(this.props.data);\n      onDataChange(this.props.data);\n    }\n  }\n\n  get groupName() {\n    const id = this.props.id;\n    return \"TrelloBoard\".concat(id);\n  }\n\n  render() {\n    const _this$props5 = this.props,\n          id = _this$props5.id,\n          components = _this$props5.components,\n          reducerData = _this$props5.reducerData,\n          draggable = _this$props5.draggable,\n          laneDraggable = _this$props5.laneDraggable,\n          laneDragClass = _this$props5.laneDragClass,\n          laneDropClass = _this$props5.laneDropClass,\n          style = _this$props5.style,\n          onDataChange = _this$props5.onDataChange,\n          onCardAdd = _this$props5.onCardAdd,\n          onCardUpdate = _this$props5.onCardUpdate,\n          onCardClick = _this$props5.onCardClick,\n          onBeforeCardDelete = _this$props5.onBeforeCardDelete,\n          onCardDelete = _this$props5.onCardDelete,\n          onLaneScroll = _this$props5.onLaneScroll,\n          onLaneClick = _this$props5.onLaneClick,\n          onLaneAdd = _this$props5.onLaneAdd,\n          onLaneDelete = _this$props5.onLaneDelete,\n          onLaneUpdate = _this$props5.onLaneUpdate,\n          editable = _this$props5.editable,\n          canAddLanes = _this$props5.canAddLanes,\n          laneStyle = _this$props5.laneStyle,\n          onCardMoveAcrossLanes = _this$props5.onCardMoveAcrossLanes,\n          t = _this$props5.t,\n          otherProps = (0, _objectWithoutProperties2.default)(_this$props5, [\"id\", \"components\", \"reducerData\", \"draggable\", \"laneDraggable\", \"laneDragClass\", \"laneDropClass\", \"style\", \"onDataChange\", \"onCardAdd\", \"onCardUpdate\", \"onCardClick\", \"onBeforeCardDelete\", \"onCardDelete\", \"onLaneScroll\", \"onLaneClick\", \"onLaneAdd\", \"onLaneDelete\", \"onLaneUpdate\", \"editable\", \"canAddLanes\", \"laneStyle\", \"onCardMoveAcrossLanes\", \"t\"]);\n    const addLaneMode = this.state.addLaneMode; // Stick to whitelisting attributes to segregate board and lane props\n\n    const passthroughProps = (0, _pick.default)(this.props, ['onCardMoveAcrossLanes', 'onLaneScroll', 'onLaneDelete', 'onLaneUpdate', 'onCardClick', 'onBeforeCardDelete', 'onCardDelete', 'onCardAdd', 'onCardUpdate', 'onLaneClick', 'laneSortFunction', 'draggable', 'laneDraggable', 'cardDraggable', 'collapsibleLanes', 'canAddLanes', 'hideCardDeleteIcon', 'tagStyle', 'handleDragStart', 'handleDragEnd', 'cardDragClass', 'editLaneTitle', 't']);\n    return _react.default.createElement(components.BoardWrapper, (0, _extends2.default)({\n      style: style\n    }, otherProps, {\n      draggable: false\n    }), _react.default.createElement(_reactPopopo.PopoverWrapper, null, _react.default.createElement(_Container.default, {\n      orientation: \"horizontal\",\n      onDragStart: this.onDragStart,\n      dragClass: laneDragClass,\n      dropClass: laneDropClass,\n      onDrop: this.onLaneDrop,\n      lockAxis: \"x\",\n      getChildPayload: index => this.getLaneDetails(index),\n      groupName: this.groupName\n    }, reducerData.lanes.map((lane, index) => {\n      const id = lane.id,\n            droppable = lane.droppable,\n            otherProps = (0, _objectWithoutProperties2.default)(lane, [\"id\", \"droppable\"]);\n\n      const laneToRender = _react.default.createElement(_Lane.default, (0, _extends2.default)({\n        key: id,\n        boardId: this.groupName,\n        components: components,\n        id: id,\n        getCardDetails: this.getCardDetails,\n        index: index,\n        droppable: droppable === undefined ? true : droppable,\n        style: laneStyle || lane.style || {},\n        labelStyle: lane.labelStyle || {},\n        cardStyle: this.props.cardStyle || lane.cardStyle,\n        editable: editable && !lane.disallowAddingCard\n      }, otherProps, passthroughProps));\n\n      return draggable && laneDraggable ? _react.default.createElement(_Draggable.default, {\n        key: lane.id\n      }, laneToRender) : laneToRender;\n    }))), canAddLanes && _react.default.createElement(_Container.default, {\n      orientation: \"horizontal\"\n    }, editable && !addLaneMode ? _react.default.createElement(components.NewLaneSection, {\n      t: t,\n      onClick: this.showEditableLane\n    }) : addLaneMode && _react.default.createElement(components.NewLaneForm, {\n      onCancel: this.hideEditableLane,\n      onAdd: this.addNewLane,\n      t: t\n    })));\n  }\n\n}\n\nBoardContainer.propTypes = {\n  id: _propTypes.default.string,\n  components: _propTypes.default.object,\n  actions: _propTypes.default.object,\n  data: _propTypes.default.object.isRequired,\n  reducerData: _propTypes.default.object,\n  onDataChange: _propTypes.default.func,\n  eventBusHandle: _propTypes.default.func,\n  onLaneScroll: _propTypes.default.func,\n  onCardClick: _propTypes.default.func,\n  onBeforeCardDelete: _propTypes.default.func,\n  onCardDelete: _propTypes.default.func,\n  onCardAdd: _propTypes.default.func,\n  onCardUpdate: _propTypes.default.func,\n  onLaneAdd: _propTypes.default.func,\n  onLaneDelete: _propTypes.default.func,\n  onLaneClick: _propTypes.default.func,\n  onLaneUpdate: _propTypes.default.func,\n  laneSortFunction: _propTypes.default.func,\n  draggable: _propTypes.default.bool,\n  collapsibleLanes: _propTypes.default.bool,\n  editable: _propTypes.default.bool,\n  canAddLanes: _propTypes.default.bool,\n  hideCardDeleteIcon: _propTypes.default.bool,\n  handleDragStart: _propTypes.default.func,\n  handleDragEnd: _propTypes.default.func,\n  handleLaneDragStart: _propTypes.default.func,\n  handleLaneDragEnd: _propTypes.default.func,\n  style: _propTypes.default.object,\n  tagStyle: _propTypes.default.object,\n  laneDraggable: _propTypes.default.bool,\n  cardDraggable: _propTypes.default.bool,\n  cardDragClass: _propTypes.default.string,\n  laneDragClass: _propTypes.default.string,\n  laneDropClass: _propTypes.default.string,\n  onCardMoveAcrossLanes: _propTypes.default.func.isRequired,\n  t: _propTypes.default.func.isRequired\n};\nBoardContainer.defaultProps = {\n  t: v => v,\n  onDataChange: () => {},\n  handleDragStart: () => {},\n  handleDragEnd: () => {},\n  handleLaneDragStart: () => {},\n  handleLaneDragEnd: () => {},\n  onCardUpdate: () => {},\n  onLaneAdd: () => {},\n  onLaneDelete: () => {},\n  onCardMoveAcrossLanes: () => {},\n  onLaneUpdate: () => {},\n  editable: false,\n  canAddLanes: false,\n  hideCardDeleteIcon: false,\n  draggable: false,\n  collapsibleLanes: false,\n  laneDraggable: true,\n  cardDraggable: true,\n  cardDragClass: 'react_trello_dragClass',\n  laneDragClass: 'react_trello_dragLaneClass',\n  laneDropClass: ''\n};\n\nconst mapStateToProps = state => {\n  return state.lanes ? {\n    reducerData: state\n  } : {};\n};\n\nconst mapDispatchToProps = dispatch => ({\n  actions: (0, _redux.bindActionCreators)((0, _objectSpread2.default)({}, boardActions, laneActions), dispatch)\n});\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(BoardContainer);\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}