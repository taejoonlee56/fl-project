{"ast":null,"code":"import _slicedToArray from \"/home/tj/fl-carla/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/home/tj/fl-carla/src/components/header/HeaderSearch/HeaderSearch.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router';\nimport { SearchDropdown } from '../dropdowns/searchDropdown/SearchDropdown';\nimport { useResponsive } from 'hooks/useResponsive';\nimport { components as configComponents } from '@app/constants/config/components';\nimport { categoriesList } from 'constants/categoriesList';\nimport * as S from './HeaderSearch.styles';\nimport { Button } from '@app/components/common/buttons/Button/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var HeaderSearch = function HeaderSearch() {\n  _s();\n\n  var _useResponsive = useResponsive(),\n      mobileOnly = _useResponsive.mobileOnly,\n      isTablet = _useResponsive.isTablet;\n\n  var _useLocation = useLocation(),\n      pathname = _useLocation.pathname;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      query = _useState2[0],\n      setQuery = _useState2[1];\n\n  var _useState3 = useState(configComponents),\n      _useState4 = _slicedToArray(_useState3, 1),\n      components = _useState4[0];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isModalVisible = _useState6[0],\n      setModalVisible = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isOverlayVisible = _useState8[0],\n      setOverlayVisible = _useState8[1];\n\n  var sortedResults = query ? categoriesList.reduce(function (acc, current) {\n    var searchResults = components.filter(function (component) {\n      return component.categories.includes(current.name) && component.keywords.some(function (keyword) {\n        return keyword.includes(query);\n      });\n    });\n    return searchResults.length > 0 ? acc.concat({\n      category: current.name,\n      components: searchResults\n    }) : acc;\n  }, []) : null;\n  useEffect(function () {\n    setModalVisible(false);\n    setOverlayVisible(false);\n  }, [pathname]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [mobileOnly && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: isModalVisible ? 'ghost' : 'text',\n        icon: /*#__PURE__*/_jsxDEV(S.SearchIcon, {\n          onClick: function onClick() {\n            return setModalVisible(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 19\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(S.SearchModal, {\n        visible: isModalVisible,\n        closable: false,\n        footer: null,\n        onCancel: function onCancel() {\n          return setModalVisible(false);\n        },\n        destroyOnClose: true,\n        children: /*#__PURE__*/_jsxDEV(SearchDropdown, {\n          query: query,\n          setQuery: setQuery,\n          data: sortedResults,\n          isOverlayVisible: isOverlayVisible,\n          setOverlayVisible: setOverlayVisible\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true), isTablet && /*#__PURE__*/_jsxDEV(SearchDropdown, {\n      query: query,\n      setQuery: setQuery,\n      data: sortedResults,\n      isOverlayVisible: isOverlayVisible,\n      setOverlayVisible: setOverlayVisible\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(HeaderSearch, \"eeshAOl8tOb3OJs9hEb9EhOHqFc=\", false, function () {\n  return [useResponsive, useLocation];\n});\n\n_c = HeaderSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"HeaderSearch\");","map":{"version":3,"sources":["/home/tj/fl-carla/src/components/header/HeaderSearch/HeaderSearch.tsx"],"names":["React","useEffect","useState","useLocation","SearchDropdown","useResponsive","components","configComponents","categoriesList","S","Button","HeaderSearch","mobileOnly","isTablet","pathname","query","setQuery","isModalVisible","setModalVisible","isOverlayVisible","setOverlayVisible","sortedResults","reduce","acc","current","searchResults","filter","component","categories","includes","name","keywords","some","keyword","length","concat","category"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router';\nimport { SearchDropdown } from '../dropdowns/searchDropdown/SearchDropdown';\nimport { useResponsive } from 'hooks/useResponsive';\nimport { components as configComponents, Component } from '@app/constants/config/components';\nimport { categoriesList, CategoryType } from 'constants/categoriesList';\nimport * as S from './HeaderSearch.styles';\nimport { Button } from '@app/components/common/buttons/Button/Button';\n\nexport interface CategoryComponents {\n  category: CategoryType;\n  components: Component[];\n}\n\nexport const HeaderSearch: React.FC = () => {\n  const { mobileOnly, isTablet } = useResponsive();\n\n  const { pathname } = useLocation();\n\n  const [query, setQuery] = useState('');\n  const [components] = useState<Component[]>(configComponents);\n\n  const [isModalVisible, setModalVisible] = useState(false);\n  const [isOverlayVisible, setOverlayVisible] = useState(false);\n\n  const sortedResults = query\n    ? categoriesList.reduce((acc, current) => {\n        const searchResults = components.filter(\n          (component) =>\n            component.categories.includes(current.name) &&\n            component.keywords.some((keyword) => keyword.includes(query)),\n        );\n\n        return searchResults.length > 0 ? acc.concat({ category: current.name, components: searchResults }) : acc;\n      }, [] as CategoryComponents[])\n    : null;\n\n  useEffect(() => {\n    setModalVisible(false);\n    setOverlayVisible(false);\n  }, [pathname]);\n\n  return (\n    <>\n      {mobileOnly && (\n        <>\n          <Button\n            type={isModalVisible ? 'ghost' : 'text'}\n            icon={<S.SearchIcon onClick={() => setModalVisible(true)} />}\n          />\n          <S.SearchModal\n            visible={isModalVisible}\n            closable={false}\n            footer={null}\n            onCancel={() => setModalVisible(false)}\n            destroyOnClose\n          >\n            <SearchDropdown\n              query={query}\n              setQuery={setQuery}\n              data={sortedResults}\n              isOverlayVisible={isOverlayVisible}\n              setOverlayVisible={setOverlayVisible}\n            />\n          </S.SearchModal>\n        </>\n      )}\n\n      {isTablet && (\n        <SearchDropdown\n          query={query}\n          setQuery={setQuery}\n          data={sortedResults}\n          isOverlayVisible={isOverlayVisible}\n          setOverlayVisible={setOverlayVisible}\n        />\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}