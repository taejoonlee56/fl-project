{"ast":null,"code":"import _slicedToArray from \"/home/tj/fl-carla/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/home/tj/fl-carla/dashboard/src/components/auth/SecurityCodeForm/SecurityCodeForm.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Image, Spin } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { BaseForm } from '@app/components/common/forms/BaseForm/BaseForm';\nimport { VerificationCodeInput } from '@app/components/common/VerificationCodeInput/VerificationCodeInput';\nimport { useAppDispatch } from '@app/hooks/reduxHooks';\nimport { doVerifySecurityCode } from '@app/store/slices/authSlice';\nimport { notificationController } from '@app/controllers/notificationController';\nimport VerifyEmailImage from '@app/assets/images/verify-email.png';\nimport * as Auth from '@app/components/layouts/AuthLayout/AuthLayout.styles';\nimport * as S from './SecurityCodeForm.styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var SecurityCodeForm = function SecurityCodeForm(_ref) {\n  _s();\n\n  var onBack = _ref.onBack,\n      onFinish = _ref.onFinish;\n  var navigate = useNavigate();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var dispatch = useAppDispatch();\n  var navigateBack = useCallback(function () {\n    return navigate(-1);\n  }, [navigate]);\n  var navigateForward = useCallback(function () {\n    return navigate('/auth/new-password');\n  }, [navigate]);\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      securityCode = _useState2[0],\n      setSecurityCode = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setLoading = _useState4[1];\n\n  useEffect(function () {\n    if (securityCode.length === 6) {\n      setLoading(true);\n      dispatch(doVerifySecurityCode({\n        code: securityCode\n      })).unwrap().then(onFinish || navigateForward).catch(function (err) {\n        notificationController.error({\n          message: err.message\n        });\n        setLoading(false);\n      });\n    }\n  }, [securityCode, navigateForward, onFinish, dispatch]);\n  return /*#__PURE__*/_jsxDEV(Auth.FormWrapper, {\n    children: /*#__PURE__*/_jsxDEV(BaseForm, {\n      layout: \"vertical\",\n      requiredMark: \"optional\",\n      children: [/*#__PURE__*/_jsxDEV(Auth.BackWrapper, {\n        onClick: onBack || navigateBack,\n        children: [/*#__PURE__*/_jsxDEV(Auth.BackIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, _this), t('common.back')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(S.ContentWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(S.ImageWrapper, {\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: VerifyEmailImage,\n            alt: \"Not found\",\n            preview: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Auth.FormTitle, {\n          children: t('securityCodeForm.title')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(S.VerifyEmailDescription, {\n          children: t('common.verifCodeSent')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, _this), isLoading ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 24\n        }, _this) : /*#__PURE__*/_jsxDEV(VerificationCodeInput, {\n          autoFocus: true,\n          onChange: setSecurityCode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 35\n        }, _this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          target: \"_blank\",\n          children: /*#__PURE__*/_jsxDEV(S.NoCodeText, {\n            children: t('securityCodeForm.noCode')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(SecurityCodeForm, \"i8Cw7Jz1UGDazmDA1rZvG6mZ5xY=\", false, function () {\n  return [useNavigate, useTranslation, useAppDispatch];\n});\n\n_c = SecurityCodeForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SecurityCodeForm\");","map":{"version":3,"sources":["/home/tj/fl-carla/dashboard/src/components/auth/SecurityCodeForm/SecurityCodeForm.tsx"],"names":["React","useState","useEffect","useCallback","useNavigate","Link","Image","Spin","useTranslation","BaseForm","VerificationCodeInput","useAppDispatch","doVerifySecurityCode","notificationController","VerifyEmailImage","Auth","S","SecurityCodeForm","onBack","onFinish","navigate","t","dispatch","navigateBack","navigateForward","securityCode","setSecurityCode","isLoading","setLoading","length","code","unwrap","then","catch","err","error","message"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AACA,SAASC,WAAT,EAAsBC,IAAtB,QAAkC,kBAAlC;AACA,SAASC,KAAT,EAAgBC,IAAhB,QAA4B,MAA5B;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,QAAT,QAAyB,gDAAzB;AACA,SAASC,qBAAT,QAAsC,oEAAtC;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,oBAAT,QAAqC,6BAArC;AACA,SAASC,sBAAT,QAAuC,yCAAvC;AACA,OAAOC,gBAAP,MAA6B,qCAA7B;AACA,OAAO,KAAKC,IAAZ,MAAsB,sDAAtB;AACA,OAAO,KAAKC,CAAZ,MAAmB,2BAAnB;;AAOA,OAAO,IAAMC,gBAAiD,GAAG,SAApDA,gBAAoD,OAA0B;AAAA;;AAAA,MAAvBC,MAAuB,QAAvBA,MAAuB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AACzF,MAAMC,QAAQ,GAAGhB,WAAW,EAA5B;;AACA,wBAAcI,cAAc,EAA5B;AAAA,MAAQa,CAAR,mBAAQA,CAAR;;AACA,MAAMC,QAAQ,GAAGX,cAAc,EAA/B;AAEA,MAAMY,YAAY,GAAGpB,WAAW,CAAC;AAAA,WAAMiB,QAAQ,CAAC,CAAC,CAAF,CAAd;AAAA,GAAD,EAAqB,CAACA,QAAD,CAArB,CAAhC;AACA,MAAMI,eAAe,GAAGrB,WAAW,CAAC;AAAA,WAAMiB,QAAQ,CAAC,oBAAD,CAAd;AAAA,GAAD,EAAuC,CAACA,QAAD,CAAvC,CAAnC;;AAEA,kBAAwCnB,QAAQ,CAAC,EAAD,CAAhD;AAAA;AAAA,MAAOwB,YAAP;AAAA,MAAqBC,eAArB;;AACA,mBAAgCzB,QAAQ,CAAC,KAAD,CAAxC;AAAA;AAAA,MAAO0B,SAAP;AAAA,MAAkBC,UAAlB;;AAEA1B,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIuB,YAAY,CAACI,MAAb,KAAwB,CAA5B,EAA+B;AAC7BD,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAN,MAAAA,QAAQ,CAACV,oBAAoB,CAAC;AAAEkB,QAAAA,IAAI,EAAEL;AAAR,OAAD,CAArB,CAAR,CACGM,MADH,GAEGC,IAFH,CAEQb,QAAQ,IAAIK,eAFpB,EAGGS,KAHH,CAGS,UAACC,GAAD,EAAS;AACdrB,QAAAA,sBAAsB,CAACsB,KAAvB,CAA6B;AAAEC,UAAAA,OAAO,EAAEF,GAAG,CAACE;AAAf,SAA7B;AACAR,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OANH;AAOD;AACF,GAXQ,EAWN,CAACH,YAAD,EAAeD,eAAf,EAAgCL,QAAhC,EAA0CG,QAA1C,CAXM,CAAT;AAaA,sBACE,QAAC,IAAD,CAAM,WAAN;AAAA,2BACE,QAAC,QAAD;AAAU,MAAA,MAAM,EAAC,UAAjB;AAA4B,MAAA,YAAY,EAAC,UAAzC;AAAA,8BACE,QAAC,IAAD,CAAM,WAAN;AAAkB,QAAA,OAAO,EAAEJ,MAAM,IAAIK,YAArC;AAAA,gCACE,QAAC,IAAD,CAAM,QAAN;AAAA;AAAA;AAAA;AAAA,iBADF,EAEGF,CAAC,CAAC,aAAD,CAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAKE,QAAC,CAAD,CAAG,cAAH;AAAA,gCACE,QAAC,CAAD,CAAG,YAAH;AAAA,iCACE,QAAC,KAAD;AAAO,YAAA,GAAG,EAAEP,gBAAZ;AAA8B,YAAA,GAAG,EAAC,WAAlC;AAA8C,YAAA,OAAO,EAAE;AAAvD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBADF,eAIE,QAAC,IAAD,CAAM,SAAN;AAAA,oBAAiBO,CAAC,CAAC,wBAAD;AAAlB;AAAA;AAAA;AAAA;AAAA,iBAJF,eAKE,QAAC,CAAD,CAAG,sBAAH;AAAA,oBAA2BA,CAAC,CAAC,sBAAD;AAA5B;AAAA;AAAA;AAAA;AAAA,iBALF,EAMGM,SAAS,gBAAG,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,iBAAH,gBAAc,QAAC,qBAAD;AAAuB,UAAA,SAAS,MAAhC;AAAiC,UAAA,QAAQ,EAAED;AAA3C;AAAA;AAAA;AAAA;AAAA,iBAN1B,eAOE,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,GAAT;AAAa,UAAA,MAAM,EAAC,QAApB;AAAA,iCACE,QAAC,CAAD,CAAG,UAAH;AAAA,sBAAeL,CAAC,CAAC,yBAAD;AAAhB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,iBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,eALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,WADF;AAqBD,CA7CM;;GAAMJ,gB;UACMb,W,EACHI,c,EACGG,c;;;KAHNM,gB","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { Image, Spin } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { BaseForm } from '@app/components/common/forms/BaseForm/BaseForm';\nimport { VerificationCodeInput } from '@app/components/common/VerificationCodeInput/VerificationCodeInput';\nimport { useAppDispatch } from '@app/hooks/reduxHooks';\nimport { doVerifySecurityCode } from '@app/store/slices/authSlice';\nimport { notificationController } from '@app/controllers/notificationController';\nimport VerifyEmailImage from '@app/assets/images/verify-email.png';\nimport * as Auth from '@app/components/layouts/AuthLayout/AuthLayout.styles';\nimport * as S from './SecurityCodeForm.styles';\n\ninterface SecurityCodeFormProps {\n  onBack?: () => void;\n  onFinish?: () => void;\n}\n\nexport const SecurityCodeForm: React.FC<SecurityCodeFormProps> = ({ onBack, onFinish }) => {\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const dispatch = useAppDispatch();\n\n  const navigateBack = useCallback(() => navigate(-1), [navigate]);\n  const navigateForward = useCallback(() => navigate('/auth/new-password'), [navigate]);\n\n  const [securityCode, setSecurityCode] = useState('');\n  const [isLoading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (securityCode.length === 6) {\n      setLoading(true);\n      dispatch(doVerifySecurityCode({ code: securityCode }))\n        .unwrap()\n        .then(onFinish || navigateForward)\n        .catch((err) => {\n          notificationController.error({ message: err.message });\n          setLoading(false);\n        });\n    }\n  }, [securityCode, navigateForward, onFinish, dispatch]);\n\n  return (\n    <Auth.FormWrapper>\n      <BaseForm layout=\"vertical\" requiredMark=\"optional\">\n        <Auth.BackWrapper onClick={onBack || navigateBack}>\n          <Auth.BackIcon />\n          {t('common.back')}\n        </Auth.BackWrapper>\n        <S.ContentWrapper>\n          <S.ImageWrapper>\n            <Image src={VerifyEmailImage} alt=\"Not found\" preview={false} />\n          </S.ImageWrapper>\n          <Auth.FormTitle>{t('securityCodeForm.title')}</Auth.FormTitle>\n          <S.VerifyEmailDescription>{t('common.verifCodeSent')}</S.VerifyEmailDescription>\n          {isLoading ? <Spin /> : <VerificationCodeInput autoFocus onChange={setSecurityCode} />}\n          <Link to=\"/\" target=\"_blank\">\n            <S.NoCodeText>{t('securityCodeForm.noCode')}</S.NoCodeText>\n          </Link>\n        </S.ContentWrapper>\n      </BaseForm>\n    </Auth.FormWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}